# ğŸ•³ï¸âš”ï¸ CavRogue â€” Design Doc (Story, Gameplay & ProcGen)

Welcome to the â€œdev journalâ€ of **CavRogue** ğŸ˜„  
Here we explain the **vibe**, the **gameplay loop**, the **procedural generation**, and the **enemy types**â€¦ with a bit more fantasy, emojis, and â€œcursed cave adventureâ€ energy âœ¨ğŸ¦‡

> ğŸ¯ Project goal: a super readable **1â€‘bit roguelike**, playable with **6 buttons**, designed to be ported to  
> **ESP32â€‘S3 (N16R8)** + **Nokia 5110 / PCD8544 (84Ã—48, 1â€‘bit)**.

---

## ğŸŒŸ The pitch (one sentence)

A brave delver goes down into a living, shifting, cursed caveâ€¦  
hunting fragments of an ancient artifact while creatures and constructs stalk you in the dark. ğŸ˜ˆğŸ”¦

---

## ğŸ§™â€â™‚ï¸ Lore & story (why are we here?)

Under an abandoned mine lies a network of tunnels known as **The Vault**.  
Legends say an artifact called the **Basalt Heart** was shattered into fragments.

Since then, the cave **moves**. It **breathes**. It **rewrites** its own corridors.  
And it has â€œgrownâ€ guardians: rusty machines, hungry shadows, eyes glowing through dustâ€¦ ğŸ‘ï¸ğŸª¨

You play as a **delver**:  
a scout sent to retrieve **fragments** and bring back **data**.

### ğŸ” Why runs restart (the roguelike reset)
When you fall, itâ€™s not a classic â€œgame overâ€â€¦ itâ€™s the cave **closing behind you**.

- caveâ€‘ins ğŸ§±
- energy surges âš¡
- map interference ğŸ—ºï¸âŒ
- doors that didnâ€™t exist yesterday ğŸšªâœ¨

You crawl back to the surfaceâ€¦ or wake up at camp, covered in stone dust.  
The next descent will be **different**.

> ğŸ§© (Future option): the only thing that truly carries over is your knowledge (and maybe a tiny metaâ€‘progression later ğŸ˜‰).

---

## ğŸ® Gameplay loop (the heart of the run)

A typical run:

1. **Spawn** (short â€œsafeâ€ area) ğŸ•ï¸  
2. **Explore** a procedurally generated room ğŸ§­  
3. **Fight / dodge** ğŸ¹  
4. **Find the exit** (or meet a goal) ğŸšª  
5. **Descend deeper** (next level) â›ï¸  
6. (Optional) Every X levels: **bonus choice** ğŸ  
7. You die? âœ **new descent** ğŸ”

### ğŸ§  Feel goals
- â€œOne more run ğŸ˜…â€ pacing (fast restarts, addictive)
- Readable on a tiny screen (big shapes, low clutter)
- Difficulty = patterns + positioning, not â€œcheap shotsâ€

---

## ğŸ›ï¸ Controls (6 buttons minimum)

- â¬†ï¸â¬‡ï¸â¬…ï¸â¡ï¸ : movement
- ğŸ…°ï¸ A : action / confirm / pick bonus
- ğŸ…±ï¸ B : shoot / back (context dependent)

Optional if you add 1â€“2 more buttons later:
- â–¶ï¸ Start : pause/menu
- â­ Select : scores / info

---

## âš™ï¸ Core mechanics

### ğŸƒ Movement
- Simple and responsive
- Collisions = walls/rocks (no complex physics)

### ğŸ”« Shooting
- Bullets are **very readable** (1â€‘bit)
- Fire rate is limited to keep patterns understandable

### â¤ï¸ Health / damage
- Keep it simple (e.g. 3 hearts â¤ï¸â¤ï¸â¤ï¸ or a tiny bar)
- â€œNo-hit runâ€ potential for bragging rights ğŸ˜

### ğŸ§® Score (simple ideas)
- +X per enemy defeated
- +X per depth reached
- (Optional) +X â€œperfect clearâ€, â€œspeedâ€, etc.

---

## ğŸ§ª Procedural generation (ProcGen) â€” ESP32â€‘friendly version

We want procedural content thatâ€™s **cheap** but still has **personality**.

### ğŸ—ºï¸ Recommended recipe (simple + reliable)
1. Pick room size (within limits) ğŸ“  
2. Place a safe **spawn** ğŸ•ï¸  
3. Place an **exit** far enough ğŸšª  
4. Create obstacles as rock â€œblobsâ€ ğŸª¨  
   - a few seeds
   - grow each seed in small steps (tiny random walk / light cellular)
5. Validate a path exists (spawn âœ exit) âœ…  
6. Spawn enemies (minimum distance from player) ğŸ‘¾

### ğŸ“ˆ How the procgen scales
To raise tension without exploding complexity:

- ğŸ§± Slightly meaner obstacle layouts (narrower corridors)
- ğŸ‘¾ More enemies (slowly)
- ğŸ“ Bigger rooms sometimes (not every level)

> âœ… Tip: increase map size **every 2 levels** (or every 5), and enemies **+1 per level**. Simple to tune, easy to explain.

---

## ğŸ‘¹ Enemies (clear patterns on a tiny display)

On a Nokiaâ€‘sized screen, what makes an enemy â€œuniqueâ€ is mostly:
- how it **moves**
- how it **shoots**

Hereâ€™s a fantasy cave bestiary ğŸ˜ˆâœ¨  
(Your code can keep technical names, but the doc can be fun.)

### ğŸŸ¢ 1) The Pebble Pinger (basic shooter)
- slowly follows
- fires a single aimed shot at intervals
- role: teaches dodging

### ğŸŸ¡ 2) The Scrying Eye (sweep / burst)
- moves in short bursts
- fires a short burst (2â€“3) or a sweep
- role: forces repositioning, punishes camping

### ğŸ”µ 3) The Mist Drifter (wander)
- semi-random movement
- rarely shoots
- role: adds chaos and pushes bad angles

### ğŸ”´ 4) The Spike Charger (dash)
- waitsâ€¦ then dashes in a straight line
- sometimes no shooting at all
- role: panic moments ğŸ˜±

### ğŸŸ£ 5) The Relic Turret (static)
- doesnâ€™t move
- predictable patterns (single/double/spread)
- role: zone control (micro-puzzle)

### âš« 6) The Splitter (rare elite)
- on death, splits into 2 weaker minis
- role: â€œoh noâ€¦â€ but just enough ğŸ˜…

#### âœ… Antiâ€‘unfair rules
- never spawn too close to the player
- consistent bullet speeds
- cap simultaneous bullets on screen (readable + ESP32â€‘friendly)

---

## ğŸ§Ÿâ€â™‚ï¸ (Optional) Miniâ€‘boss / Guardian

Every X levels: a bigger variant with **two phases**:
- normal phase (slow, precise)
- rage phase at low HP (short bursts)

Goal: a quick â€œboss momentâ€, not a marathon.

---

## ğŸ–¤ Why 1â€‘bit is a strength (not a punishment)

1â€‘bit forces:
- strong silhouettes
- short but punchy animations
- a consistent retro look

Result: even on PC, it becomes a style choice ğŸ”¥

---

## ğŸ§­ Roadmap (PC âœ ESP32)

### âœ… Short term (PC prototype)
- lock enemy roster + patterns
- lock ProcGen rules (size, obstacles, spawns)
- improve menus + score screen
- add a stylish â€œstory screenâ€ (short text + icons)

### ğŸ”œ Mid term (ESP32)
- embedded game loop
- 1â€‘bit framebuffer rendering (PCD8544)
- GPIO buttons + debounce
- score/save in NVS or a tiny flash file

---

## ğŸ“Œ Things to add later (great for GitHub)
- ğŸ“¸ a 20â€“30s gameplay GIF (huge impact)
- ğŸ•¹ï¸ a â€œ6 buttonsâ€ mapping + wiring diagram
- ğŸ“Š tuning table: fire rate, bullet speed, enemy spawn rules
- ğŸ§ª enemy list with one-line pattern descriptions

---

## ğŸ’¬ Fun notes (keep this energy)
- If the player dies in 2 seconds, they should think: â€œok, thatâ€™s on me ğŸ˜…â€
- If they survive, they should think: â€œIâ€™m becoming unstoppable ğŸ˜ˆâ€
- And if the cave traps themâ€¦ it should make them want to dive again ğŸ˜„ğŸ•³ï¸
